dir()
dir(pattern = "csv")
dir(pattern = "csv")[2]
filename<-dir(pattern = "csv")[2]
read.csv(filen)
read.csv(filename)
read.csv(filename, encodingFlie="cp932")
read.csv(filename, fileEncoding = "cp932"
read.csv(filename, fileEncoding = "cp932")
read.csv(filename, fileEncoding = "utf8")
filename
read.csv(filename, fileEncoding = "cp932")
read.csv(filename, fileEncoding = "cp932")
library(dplyr)
kagome<-read.csv(filename, fileEncoding = "cp932")
kagome %>% tbl_df()
kagome %>% tbl_df
kagome<-kagome %>% tbl_df
kagome
kagome
colnames(kagome)
kagome %>% summary()
kagome %>% select(.$PREFECTURE) %>% table()
kagome %>% select(.$PREFECTURE) %>% table(.)
kagome %>% select(PREFECTURE)
kagome %>% select(PREFECTURE) %>% table
kagome %>% select(PREFECTURE) %>% table %>% plot()
kagome %>% select(PREFECTURE) %>% table %>% data.frame()
kagome %>% select(PREFECTURE) %>% table %>% data.frame() %>% arrange(2)
kagome %>% select(PREFECTURE) %>% table %>% data.frame() %>% arrange(Freq)
kagome %>% select(PREFECTURE) %>% table %>% data.frame() %>% arrange(Freq, desc())
kagome %>% select(PREFECTURE) %>% table %>% data.frame() %>% arrange(Freq)
kagome %>% select(PREFECTURE) %>% table %>% data.frame() %>% arrange(Freq) %>% plot()
kagome %>% select(PREFECTURE) %>% table %>% data.frame() %>% arrange(Freq) %>% plot()
kagome %>% select(PREFECTURE) %>% table %>% data.frame() %>% arrange(Freq) %>% select(2)
%>% plot()
filelists <- dir(pattern = "csv")
filelists <- dir(pattern = "csv")
filelists
kagome <- read.csv(filelists[1], header=F, fileEncoding = "cp932")
tbl_df(kagome)
kagome %>% select(2)
kagome %>% slice(2:)
kagome %>% slice(2:10)
kagome %>% .[-1, ]
kagome %>% .[-1, ] %>% tbl_df()
kagome %>% .[-1, ] %>% tbl_df() %>% [1, ]
kagome %>% .[-1, ] %>% tbl_df() %>% .[1, ]
kagome %>% .[-1, ] %>% tbl_df() %>% .[1, ] %>% summary()
summary()
summary()
kagome %>% .[-1, ] %>% tbl_df() %>% .[1, ] %>% summary()
kagome %>% .[-1, ] %>% tbl_df() %>% .[1, ]
kagome
source('~/.active-rstudio-document', echo=TRUE)
kagome %>% .[-1, ]
kagome<-kagome %>% .[-1, ]
kagome
kagome %>% tbl_df
kagome <- read.csv(filelists[1], header=F, fileEncoding = "cp932")
tbl_df(kagome)
col<-kagome[2, ]
col
kagome<-kagome %>% .[-1, ]
kagome
kagome %>% tbl_df
kagome<-kagome %>% .[-1, ]
kagome %>% tbl_df
colnames(kagome)<-col
kagome
kagome %>% tbl_df()
kagome %>% tbl_df()
kagome
kagome
kagome <- read.csv(filelists[1], header=F, fileEncoding = "cp932")
tbl_df(kagome)
col<-kagome[2, ]
kagome<-kagome %>% .[-1, ]
kagome<-kagome %>% .[-1, ] %>% add_rownames()
kagome<-kagome %>% .[-1, ] %>% add_rownames("id")
kagome<-kagome %>% .[-1, ] %>% row_number()
kagome<-kagome %>% .[-1, ] %>% row_number("aa")
kagome<-kagome %>% .[-1, ] %>% tibble::column_to_rownames("aa")
kagome<-kagome %>% .[-1, ] %>% tibble::rownames_to_column("aa")
kagome
kagome <- read.csv(filelists[1], header=F, fileEncoding = "cp932")
tbl_df(kagome)
col<-kagome[2, ]
kagome<-kagome %>% .[-1, ] %>% tibble::rownames_to_column("aa")
kagome
kagome<-kagome %>% .[-c(1,2 ), ] %>% tibble::rownames_to_column("id")
kagome
kagome <- read.csv(filelists[1], header=F, fileEncoding = "cp932")
tbl_df(kagome)
col<-kagome[2, ]
kagome<-kagome %>% .[-c(1,2 ), ] %>% tibble::rownames_to_column("id")
kagome %>% tbl_df()
kagome %>% tbl_df()
col
colnames(kagome)<-col %>% c
col
iris
iris %>% colnames()
iris %>% colnames()
iris %>% tbl_df()
iris %>% tbl_df() %>% tibble::rownames_to_column("id")
aa<-iris %>% tbl_df() %>% tibble::rownames_to_column("id")
aa
aa
aa %>% gather("a", "b", Sepal.Length, Sepal.Width)
aa %>% tidyr::gather("a", "b", Sepal.Length, Sepal.Width)
aa %>% tidyr::gather("a", "b",
Sepal.Length,Sepal.Width,Petal.Length,Petal.Width )
aa<-aa %>% tidyr::gather("a", "b",
aa<-iris %>% tbl_df() %>% tibble::rownames_to_column("id")
aa<-aa %>% tidyr::gather("a", "b",
Sepal.Length,Sepal.Width,Petal.Length,Petal.Width )
aa<-iris %>% tbl_df() %>% tibble::rownames_to_column("id")
aa<-aa %>% tidyr::gather("a", "b",
Sepal.Length,Sepal.Width,Petal.Length,Petal.Width )
aa
aa %>% spline(a)
aa %>% split(a)
aa %>% split(a)
aa %>% split("a")
aa %>% split("a", "a1", "a2", sep = ".")
aa %>% split("a", "a1", "a2", sep = "\\.")
aa %>% split(a, "a1", "a2", sep = "\\.")
aa %>% split("a", "a1", "a2", sep = "\\.")
aa
aa %>% split("a", "a1", "a2", sep = "\\.")
aa %>% split("a", "a1", "a2", sep = \\.)
aa %>% split("a", "a1", "a2", sep = "\\.")
?split
aa %>% separate(a, "a1", "a2", sep = "\\."))
aa %>% separate(a, "a1", "a2", sep = "\\.")
aa %>% tidyr::separate(a, "a1", "a2", sep = "\\.")
aa %>% tidyr::separate(a, c("a1", "a2"), sep = "\\.")
aa<-aa %>% tidyr::separate(a, c("a1", "a2"), sep = "\\.")
aa %>% table(.$id)
aa %>% table(.$id)
aa %>% table(.[[1]])
aa$id
aa$id %>% table()
aa %>% arrange(1)
aa %>% arrange(1)
aa %>% select(everything()) %>% arrange(1)
aa %>% select(everything()) %>% arrange(id)
# install.packages("dplyr")
suppressMessages(library(dplyr))
kagome <- read.csv("978145_rawdata.csv", fileEncoding = "cp932")
kagome
kagome.survey<-kagome %>% select(-ANSWERDATE, -CELL, -SAMPLEID, -CELLNAME, -Q6_6FA, -Q7_6FA) %>% mutate(id=1:nrow(.)) %>% select(id, everything())
kagome.survey
kagome.survey <- kagome.survey %>% select(-AGEID)
kagome.survey <- kagome.survey %>% select(-AREA)
kagome.survey <- kagome.survey %>% select(-Q1_14FA)
kagome.survey
kagome.survey %>% tbl_df()
table(kagome.survey$JOB)
temp<-kagome.survey$JOB
temp
ifelse(temp==1,"公務員")
ifelse(temp==1,"公務員", "")
ifelse(temp==1 & temp==2,"公務員", "")
ifelse(temp==1 || temp==2,"公務員", "")
ifelse(temp==1 | temp==2,"公務員", "")
ifelse(temp==1 | temp==2,"公務員", "非公務員")
ifelse(temp == 1 | temp == 2,
"公務員",
ifelse(temp == 3 | temp == 4, "学生", "その他"))
kagome.survey
kagome.survey %>% mutate(日こり暮らし=Q1_1)
kagome.survey %>% mutate(日こり暮らし=Q1_1) %>% select(-Q1_1)
kagome.survey %>% mutate(一人暮らし=Q1_1) %>% select(-Q1_1)
kagome.survey %>% mutate(一人暮らし=Q1_1) %>% select(-Q1_1) %>%
mutate(配偶者=Q1_2) %>% select(-Q1_2)
kagome.survey %>% mutate(一人暮らし=Q1_1) %>% select(-Q1_1) %>%
mutate(配偶者=Q1_2) %>% select(-Q1_2) %>%
mutate(家族と暮らす=Q1_3+Q1_4)
kagome.survey
kagome.survey$Q2S1
kagome.survey$Q2S1
kagome.survey$Q2S1 %>% 8-.
8-kagome.survey$Q2S1
kagome.survey$Q2S1
9-kagome.survey$Q2S1
kagome.survey
iris
iris %>% mean(iris$Sepal.Width, iris$Petal.Length)
dat <- data.frame(ID  = c("A","B","C","D"), Q1 = c(1,0,NA,NA), Q2 = c(1,1,NA,1), Q3 = c(0,0,NA,0))
dat
dat$total
rowSums(dat[,2:4])
rowMeans(dat[,2:4])
rowMeans(dat[,2:4], na.rm = T)
